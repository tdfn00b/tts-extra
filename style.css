:root {
    --bg-color-darkest: #111827; /* gray-900 */
    --bg-color-dark: #1f2937;    /* gray-800 */
    --bg-color-medium: #374151; /* gray-700 */
    --border-color: #4b5563;    /* gray-600 */
    --text-color-light: #d1d5db; /* gray-300 */
    --text-color-muted: #9ca3af; /* gray-400 */
    --accent-color-cyan: #22d3ee; /* cyan-400 */
    --accent-color-cyan-hover: #67e8f9; /* cyan-300 */
    --accent-color-blue: #3b82f6; /* blue-500 */
    --accent-color-green: #22c55e; /* green-500 */
    --accent-color-red: #ef4444; /* red-500 */
    --font-sans: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.adv-tts-container {
    font-family: var(--font-sans);
    color: var(--text-color-light);
    background-color: var(--bg-color-darkest);
    padding: 1rem;
    margin-top: 1rem;
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

/* --- Layout --- */
.adv-tts-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); }
.adv-tts-header h1 { font-size: 1.5rem; font-weight: bold; color: var(--accent-color-cyan); }
.adv-tts-main-grid { display: grid; grid-template-columns: repeat(1, 1fr); gap: 1rem; }
@media (min-width: 1024px) { .adv-tts-main-grid { grid-template-columns: repeat(3, 1fr); } }
.adv-tts-column { display: flex; flex-direction: column; gap: 1rem; min-height: 0; }
.adv-tts-preset-manager { display: flex; gap: 0.5rem; align-items: center; }

/* --- Cards --- */
.adv-tts-card { background-color: var(--bg-color-dark); border-radius: 8px; padding: 1rem; display: flex; flex-direction: column; }
.adv-tts-card h2 { font-size: 1.25rem; font-weight: bold; color: var(--accent-color-cyan); margin-bottom: 0.75rem; }
.adv-tts-card h3 { font-size: 1rem; font-weight: bold; margin-top: 1rem; margin-bottom: 0.5rem; color: var(--text-color-light); border-bottom: 1px solid var(--border-color); padding-bottom: 0.25rem; }
.adv-tts-card-full-height { flex-grow: 1; }
.adv-tts-card-actions { display: flex; justify-content: flex-end; margin-top: 1rem; }

/* --- Forms & Inputs --- */
.adv-tts-input, .adv-tts-textarea, .adv-tts-select { width: 100%; background-color: var(--bg-color-medium); border: 1px solid var(--border-color); border-radius: 6px; padding: 0.5rem 0.75rem; color: var(--text-color-light); transition: border-color 0.2s, box-shadow 0.2s; box-sizing: border-box; }
.adv-tts-input:focus, .adv-tts-textarea:focus, .adv-tts-select:focus { outline: none; border-color: var(--accent-color-cyan); box-shadow: 0 0 0 2px rgba(34, 211, 238, 0.5); }
.adv-tts-textarea { flex-grow: 1; resize: none; }
.adv-tts-input-actions { display: flex; gap: 1rem; margin-top: 1rem; }
.adv-tts-input-group { display: flex; flex-direction: column; gap: 0.25rem; margin-bottom: 0.75rem; }
.adv-tts-input-group label { font-size: 0.875rem; color: var(--text-color-muted); }
.adv-tts-slider-group { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 0.75rem; }
.adv-tts-slider-group .adv-tts-slider-value { font-family: monospace; color: var(--accent-color-cyan-hover); width: 40px; text-align: right;}
.adv-tts-slider[type=range] { -webkit-appearance: none; appearance: none; background: transparent; cursor: pointer; }
.adv-tts-slider[type=range]::-webkit-slider-runnable-track { background: var(--bg-color-medium); height: 0.5rem; border-radius: 1rem; }
.adv-tts-slider[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; margin-top: -4px; background-color: var(--accent-color-cyan); height: 1rem; width: 1rem; border-radius: 50%; }

/* --- Buttons --- */
.adv-tts-btn, .adv-tts-btn-icon { border: none; border-radius: 6px; padding: 0.5rem 1rem; font-weight: bold; color: white; cursor: pointer; transition: background-color 0.2s; display: inline-flex; align-items: center; justify-content: center; }
.adv-tts-btn:disabled, .adv-tts-btn-icon:disabled { background-color: var(--bg-color-medium) !important; cursor: not-allowed; opacity: 0.6; }
.adv-tts-btn-cyan { background-color: #0891b2; } .adv-tts-btn-cyan:hover { background-color: #06b6d4; }
.adv-tts-btn-blue { background-color: var(--accent-color-blue); } .adv-tts-btn-blue:hover { background-color: #60a5fa; }
.adv-tts-btn-green { background-color: var(--accent-color-green); } .adv-tts-btn-green:hover { background-color: #4ade80; }
.adv-tts-btn-red { background-color: var(--accent-color-red); } .adv-tts-btn-red:hover { background-color: #f87171; }
.adv-tts-btn-xs { padding: 0.25rem 0.5rem; font-size: 0.75rem; }
.adv-tts-remove-btn { background-color: transparent; color: var(--accent-color-red); border: none; font-size: 1.5rem; line-height: 1; padding: 0 0.5rem; cursor: pointer; }

/* --- Settings Rules & Profiles --- */
.adv-tts-rule-row { display: grid; grid-template-columns: 2fr 1fr 1fr 2fr 1fr auto; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem; }
.adv-tts-rule-row .adv-tts-input { padding: 0.3rem 0.5rem; }
.adv-tts-profile-card { border: 1px solid var(--border-color); border-radius: 6px; padding: 0.75rem; margin-bottom: 1rem; }
.adv-tts-profile-header { display: grid; grid-template-columns: 1fr 1fr auto; gap: 0.75rem; align-items: center; margin-bottom: 0.75rem; }
.adv-tts-overrides-table { font-size: 0.875rem; }
.adv-tts-overrides-header { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; font-weight: bold; color: var(--text-color-muted); padding-bottom: 0.25rem; }
.adv-tts-overrides-row { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 0.5rem; align-items: center; margin-bottom: 0.25rem; }
.adv-tts-overrides-row .adv-tts-input { padding: 0.3rem 0.5rem; }
.adv-tts-regex-rule-row { display: grid; grid-template-columns: auto 2fr 2fr 1fr 1fr auto; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem; }

/* --- Output & Playlist --- */
.adv-tts-output-box { flex-grow: 1; overflow-y: auto; background-color: var(--bg-color-darkest); border-radius: 6px; padding: 0.5rem; min-height: 100px; }
.adv-tts-placeholder { color: var(--text-color-muted); font-style: italic; padding: 0.5rem; }
.adv-tts-chunk-item, .adv-tts-playlist-item { padding: 0.5rem 0.75rem; border-radius: 4px; margin-bottom: 0.5rem; border-left: 4px solid var(--border-color); }
.adv-tts-playlist-item.playing { background-color: rgba(34, 211, 238, 0.2); border-left-color: var(--accent-color-cyan); }
.adv-tts-chunk-type, .adv-tts-playlist-type { font-weight: bold; font-size: 0.875rem; text-transform: uppercase; }
.adv-tts-playlist-status { font-size: 0.75rem; padding: 0.1rem 0.5rem; border-radius: 12px; color: white; font-weight: bold; }
.adv-tts-playlist-status.ready { background-color: var(--accent-color-green); }
.adv-tts-playlist-status.loading { background-color: #f59e0b; color: black; }
.adv-tts-playlist-status.error { background-color: var(--accent-color-red); }
.adv-tts-playlist-status.pending { background-color: var(--border-color); }

/* --- Playback Controls --- */
.adv-tts-playback-controls { display: flex; justify-content: space-around; align-items: center; background-color: var(--bg-color-darkest); border-radius: 6px; padding: 0.5rem; }
.adv-tts-btn-icon { background: none; font-size: 1.5rem; padding: 0.5rem; color: var(--text-color-muted); }
.adv-tts-btn-icon:not(:disabled):hover { color: var(--text-color-light); }
.adv-tts-btn-icon-large { font-size: 2.5rem; color: var(--accent-color-cyan); }
.adv-tts-btn-icon-large:not(:disabled):hover { color: var(--accent-color-cyan-hover); }
.adv-tts-volume-control, .adv-tts-autoplay-control { margin-top: 1rem; display: flex; align-items: center; gap: 0.75rem; }

/* --- Debug --- */
#adv-tts-debug-header { cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
#adv-tts-debug-log-entry { background-color: #222; padding: 0.5rem; border-radius: 4px; font-size: 0.8rem; white-space: pre-wrap; word-break: break-all; margin-bottom: 0.5rem; }
.adv-tts-log-type { font-weight: bold; font-family: monospace; font-size: 0.75rem; }
.adv-tts-log-type.cache-hit { color: #f59e0b; }

/* --- Loading Spinner --- */
.adv-tts-loading-overlay { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.7); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; color: white; font-size: 1.25rem; }
.adv-tts-loading-spinner { width: 4rem; height: 4rem; border: 4px solid var(--accent-color-cyan); border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 1rem; }
@keyframes spin { to { transform: rotate(360deg); } }
